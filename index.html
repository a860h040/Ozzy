<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>OZZY Garage Control + Cameras</title>
  <h1>Ozzy's Garage + Cameras</h1>
</header>

<div class="section">
  <h2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Camera 1 &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Doorbell Camera</h2>
  <div class="cams">
    <div class="cam-card">
      <!-- Replace with your camera stream -->
      <img src="http://CAMERA_1_URL/mjpg/video.mjpg" alt="Driveway Camera"/>
    </div>
    <div class="cam-card">
      <img src="http://CAMERA_2_URL/mjpg/video.mjpg" alt="Garage Camera"/>
    </div>
     
  </div>
</div>
<div class="section">
  <h2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Camera 2 &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Camera 3</h2>
  <div class="cams">
    <div class="cam-card">
      <img src="http://CAMERA_3_URL/mjpg/video.mjpg" alt="Driveway Camera"/>
    </div>
    <div class="cam-card">
      <img src="http://CAMERA_4_URL/mjpg/video.mjpg" alt="Garage Camera"/>
    </div>
     
  </div>
</div>

<div class="section">
  <h2>Garage Controls</h2>
  <div class="controls">
    <button class="button" onclick="garageCommand('/open')">Open</button>
    <button class="button" onclick="garageCommand('/close')">Close</button>
    <button class="button" style="background:#e25555;" onclick="garageCommand('/stop')">Stop</button>
    <button class="button" onclick="refreshStatus()">Refresh Status</button>
  </div>
  <div class="status">Status: <span id="garageStatus">Unknown</span></div>
</div>
<div class="section">
  <h2>Light switches</h2>
  <div class="controls">
    <button class="button" onclick="garageCommand('/open')">Bed Room 1</button>
    <button class="button" onclick="garageCommand('/open')">Bed Room 2</button>
    <button class="button" onclick="garageCommand('/open')">Master Bed Room</button>
     <button class="button" onclick="garageCommand('/open')">Living Room</button>
     
      <button class="button" onclick="garageCommand('/open')">Guest room</button>
    <button class="button" onclick="garageCommand('/close')">Grage Light</button>
    <button class="button" onclick="garageCommand('/open')">Outdoor Light 1</button>
    <button class="button" onclick="garageCommand('/open')">Outdoor Light 2</button>
  </div>
 
</div>
<div class="section">
  <h2>Doorbell</h2>
  <button class="button" onclick="ringDoorbell()">Ring Doorbell</button>
  <div class="status">Last rung: <span id="doorbellTime">â€”</span></div>
</div>

<script>
const CONFIG = {
  GARAGE_BASE: "/api/garage",  // e.g. http://192.168.1.50/api/garage
  DOORBELL: "/api/doorbell"
};

async function garageCommand(path){
  try {
    const res = await fetch(CONFIG.GARAGE_BASE + path, {method:'POST'});
    const data = await res.json().catch(()=>({}));
    document.getElementById('garageStatus').innerText = data.state || 'Command Sent';
  } catch(e){
    document.getElementById('garageStatus').innerText = 'Error';
    alert("Garage command failed");
  }
}

async function refreshStatus(){
  try {
    const res = await fetch(CONFIG.GARAGE_BASE + "/status");
    const data = await res.json();
    document.getElementById('garageStatus').innerText = data.state;
  } catch(e){
    document.getElementById('garageStatus').innerText = 'Offline';
  }
}

async function ringDoorbell(){
  try {
    await fetch(CONFIG.DOORBELL, {method:'POST'});
    document.getElementById('doorbellTime').innerText = new Date().toLocaleTimeString();
  } catch(e){
    alert("Doorbell failed");
  }
}
</script>

</body>
</html>
